const portfolioCategories=document.querySelectorAll(".page-template-template-portfolio .portfolio__categories .category"),projects=document.querySelectorAll(".page-template-template-portfolio .project"),galleryBtns=document.querySelectorAll(".page-template-template-portfolio .open-gallery"),galleryOverlay=document.querySelector("#gallery-slideshow");function filterCategories(e,t){let l=t.getAttribute("data-cat");portfolioCategories.forEach(e=>{e.classList.remove("selected")}),t.classList.add("selected"),projects.forEach(e=>{if(e.classList.remove("visible"),"0"==l)e.style.display="flex",setTimeout(()=>{e.classList.add("visible")},400);else{e.getAttribute("data-cat").split("-").includes(l)&&(e.style.display="flex",setTimeout(()=>{e.classList.add("visible")},300))}}),setTimeout(()=>{document.querySelectorAll(".page-template-template-portfolio .project:not(.visible)").forEach(e=>{e.style.display="none"})},400)}function showGallery(e){e.preventDefault();let t=e.currentTarget.getAttribute("data-photosids").split("-"),l=document.querySelector("#gallery-overlay");if((l?l.getAttribute("data-ids"):"")!==e.currentTarget.getAttribute("data-photosids")){l&&l.remove();let r=galleryOverlay.content.cloneNode(!0);bodyWrapper.appendChild(r),document.querySelector("#gallery-overlay").setAttribute("data-ids",e.currentTarget.getAttribute("data-photosids")),t.forEach((async function(e,l=0){let r=await fetchWPAPI(e),o=document.createElement("IMG");o.setAttribute("id","photo-slide-"+l),o.setAttribute("src",r.guid.rendered),o.setAttribute("style","opacity: 0"),document.querySelector("#gallery-overlay .gallery-slide__inner").appendChild(o);let a=document.createElement("A");a.setAttribute("href","#photo-slide-"+l);let i=document.createElement("IMG");i.setAttribute("src",r.media_details.sizes.thumbnail.source_url),a.setAttribute("style","opacity: 0"),a.appendChild(i),document.querySelector("#gallery-overlay .gallery-selector__inner").appendChild(a),stylingEvent(++l,t.length)}))}else l.style.display="flex"}async function fetchWPAPI(e){let t=await fetch(document.location.origin+"/wp-json/wp/v2/media/"+e);return await t.json()}function stylingEvent(e,t){let l=document.querySelector("#gallery-overlay .gallery-slide__inner");if(t%2!=0)l.scrollTop=(l.scrollHeight-l.clientHeight)/2;else{let e=(t/2-1)*(.8*l.clientHeight+37.5);l.scrollTop=e}t===e?setTimeout(()=>{document.querySelector("#gallery-overlay .spinner").style.display="none";let e=document.querySelectorAll("#gallery-overlay .gallery-slide__inner img"),t=document.querySelectorAll("#gallery-overlay .gallery-selector__inner a");e.forEach((function(e,l=0){e.style.opacity="1",t[l].style.opacity="1",l++}))},500):document.querySelector("#gallery-overlay .spinner").style.display="block"}function closeGallery(){document.querySelector("#gallery-overlay").style.display="none"}document.addEventListener("DOMContentLoaded",()=>{portfolioCategories&&portfolioCategories.forEach(e=>{e.addEventListener("click",t=>filterCategories(t,e))}),galleryBtns&&galleryBtns.forEach(e=>{e.addEventListener("click",e=>showGallery(e))}),document.body.addEventListener("click",e=>{(e.target.classList.contains("gallery-overlay-close")||e.target.parentElement.classList.contains("gallery-overlay-close"))&&closeGallery()})});